<div class=" header bg-warning pb-6">
    <div class=" container-fluid">
        <div class=" header-body">
            <div class=" row align-items-center py-4">
                <div class=" col-lg-6 col-7">
                    <h6 *ngIf="isEdit" class=" h2 text-white d-inline-block mb-0">Edit User</h6>
                    <h6 *ngIf="!isEdit" class=" h2 text-white d-inline-block mb-0">Add User</h6>
                </div>
                <div class=" col-lg-6 col-5 text-right">

                </div>
            </div>
        </div>
    </div>
</div>

<div class=" container-fluid mt--6">
    <div class=" row">
        <div class=" col-12">
            <div class=" card">
                <form [formGroup]="userFrom" id="msform">
                    <div class="card-body">
                        <div class="row mb-4">
                            <div class="col-lg-4">
                                <div class=" form-group">
                                    <label>First name<span class="small text-warning">*</span></label>
                                    <input formControlName="first_name"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.first_name.errors }"
                                        class=" form-control" (keypress)="omit_special_char($event)" placeholder="First Name" type="text" />

                                    <div *ngIf="userTouchSubmit && mainUser.first_name.errors">
                                        <div class="d-block invalid-feedback"
                                            *ngIf="mainUser.first_name.errors?.required">First name is required
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class=" form-group">
                                    <label>Last Name<span class="small text-warning">*</span></label>
                                    <input formControlName="last_name"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.last_name.errors }"
                                        class=" form-control" (keypress)="omit_special_char($event)" placeholder="Last Name" type="text" />

                                    <div *ngIf="userTouchSubmit && mainUser.last_name.errors">
                                        <div class="d-block invalid-feedback"
                                            *ngIf="mainUser.last_name.errors?.required">Last name is required
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class=" form-group">
                                    <label>Email<span class="small text-warning">*</span></label>
                                    <input formControlName="email"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.email.errors }"
                                        class=" form-control" placeholder="Email" type="email" />

                                    <div *ngIf="userTouchSubmit && mainUser.email.errors">
                                        <div class="d-block invalid-feedback" *ngIf="mainUser.email.errors?.required">
                                            Email is required
                                        </div>
                                        <div class="d-block invalid-feedback" *ngIf="mainUser.email.email?.required">
                                            Enter Valid email
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class=" form-group">
                                    <label>Phone<span class="small text-warning">*</span></label>
                                    <input formControlName="phone"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.phone.errors }"
                                        class=" form-control" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                        maxLength="10" placeholder="Phone" type="number" />

                                    <div *ngIf="userTouchSubmit && mainUser.phone.errors">
                                        <div class="d-block invalid-feedback" *ngIf="mainUser.phone.errors?.required">
                                            Phone is required
                                        </div>
                                        <div class="d-block invalid-feedback" *ngIf="mainUser.phone.errors.pattern">
                                            Enter Valid phone
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class=" form-group">
                                    <label>City<span class="small text-warning">*</span></label>
                                    <input formControlName="city"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.city.errors }"
                                        class=" form-control" (keypress)="omit_special_char($event)" placeholder="City" type="text" />

                                    <div *ngIf="userTouchSubmit && mainUser.city.errors">
                                        <div class="d-block invalid-feedback" *ngIf="mainUser.city.errors?.required">
                                            City is required
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class=" form-group">
                                    <label>State<span class="small text-warning">*</span></label>
                                    <select formControlName="state_id"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.state_id.errors }"
                                        class=" form-control" placeholder="state">
                                        <option value="" selected disabled>Select State
                                        </option>
                                        <option *ngFor="let stType of statelistForDropdown" [value]="stType.id">
                                            {{ stType.state_name }}
                                        </option>
                                    </select>
                                    <div *ngIf="userTouchSubmit && mainUser.state_id.errors">
                                        <div class="d-block invalid-feedback"
                                            *ngIf="mainUser.state_id.errors?.required">State is required
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class=" form-group">
                                    <label>Pin Code<span class="small text-warning">*</span></label>
                                    <input formControlName="pincode"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.pincode.errors }"
                                        class=" form-control" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                        maxLength="6"  placeholder="Pin code" type="number" />

                                    <div *ngIf="userTouchSubmit && mainUser.pincode.errors">
                                        <div class="d-block invalid-feedback"
                                            *ngIf="mainUser.pincode.errors?.required">
                                            Pin code is required
                                        </div>
                                        <div class="d-block invalid-feedback" *ngIf="mainUser.pincode.errors.pattern">
                                            Enter Valid Pin code
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class=" form-group">
                                    <label>Country</label>
                                    <select 
                                    formControlName="country_id"
                                    class=" form-control" placeholder="State" readonly>
                                    <option value="1" selected disabled>India</option>
                                   
                                </select>  
                                </div>
                            </div>
                            
                            <div  class="col-lg-4">
                                <div class=" form-group mb-lg-0 mr-lg-2">
                                    <label>User Type<span class="small text-warning">*</span></label>
                                    <select formControlName="user_type"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.user_type.errors }"
                                        class=" form-control" placeholder="Select User Type" #myUserType
                                       
                                       
                                        >
                                        <!-- (change)="UserTypeCheck(myUserType.value)"-->
                                        <option value="" selected disabled>Select User Type</option>
                                        <option value="Customers"  >Customers</option>
                                        <option value="Users"  >Users</option>

                                     <!-- <option *ngFor="let item of usertypeDropDown" [value]="item.id">
                                            {{ item.description }}
                                        </option>-->  
                                        <!-- <option value="Yes"> Customer </option>
                                        <option value="No">GS Staff </option> -->
                                    </select>
                                    <div *ngIf="userTouchSubmit && mainUser.user_type.errors">
                                        <div class="d-block invalid-feedback"
                                            *ngIf="mainUser.user_type.errors?.required">
                                            User Type is required
                                        </div>
                                    </div>
                                </div>
                            </div>
                         <div   class="col-lg-4">
                                <div class=" form-group mb-lg-0 mr-lg-2">
                                    <label>Role<span class="small text-warning">*</span></label>
                                    <select formControlName="role_id"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.role_id.errors }"
                                        class=" form-control" placeholder="role">
                                        <option value="" selected disabled>Select role
                                        </option>
                                        <option [value]="1">
                                         Administrator
                                        </option>
                                    </select>
                                    <div *ngIf="userTouchSubmit && mainUser.role_id.errors">
                                        <div class="d-block invalid-feedback" *ngIf="mainUser.role_id.errors?.required">
                                            Role is required
                                        </div>
                                    </div>
                                </div>
                            </div>
                         <!-- <div *ngIf="isSelectCustomer == '1'" class="col-lg-4">
                                <label>Select Customer <span class="small text-warning">*</span> <small> (For whom to create this user.)</small></label>
                                <div class=" form-group mb-lg-0 mr-lg-2">
                                    <select formControlName="customer_id"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.customer_id.errors }"
                                        class=" form-control" placeholder="Customer">
                                        <option value="" selected disabled>Select Customer
                                        </option>
                                        <option *ngFor="let item of customerDropDown" [value]="item.id">
                                            {{ item.name }}
                                        </option>
                                    </select>

                                    <div *ngIf="userTouchSubmit && mainUser.customer_id.errors">
                                        <div class="d-block invalid-feedback"
                                            *ngIf="mainUser.customer_id.errors?.required">
                                            Customer is required
                                        </div>
                                    </div>
                                </div>
                            </div>-->  
                           <!-- <div class="col-lg-4">
                                <div class=" form-group mb-lg-0 mr-lg-2">
                                    <label>City</label>
                                    <select formControlName="all_cities"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.all_cities.errors }"
                                        class=" form-control" data-toggle="select" id="selectr-multiple-citys" multiple>
                                    </select>

                                    <div *ngIf="userTouchSubmit && mainUser.all_cities.errors">
                                        <div class="d-block invalid-feedback"
                                            *ngIf="mainUser.all_cities.errors?.required">
                                            City is required
                                        </div>
                                    </div>
                                </div>
                            </div>-->
                          <!--  <div [ngClass]="isSelectCustomer == '2' ? '' : 'd-none' " class="col-lg-4">
                                <div class=" form-group mb-lg-0 mr-lg-2">
                                    <label>Customer</label>
                                    <select formControlName="all_customers"
                                        [ngClass]="{ 'is-invalid': userTouchSubmit && mainUser.all_customers.errors }"
                                        class=" form-control" data-toggle="select" id="selectr-multiple" multiple>
                                    </select>

                                    <div *ngIf="userTouchSubmit && mainUser.all_customers.errors">
                                        <div class="d-block invalid-feedback"
                                            *ngIf="mainUser.all_customers.errors?.required">
                                            Customer is required
                                        </div>
                                    </div>
                                </div>
                            </div>-->
                          
                        </div>
                    </div>
                    <div class=" card-footer py-4 text-lg-right">
                        <button class=" btn btn-primary px-5" (click)="GoBack()" type="button">Cancel</button>
                        <button *ngIf="!isEdit" type="button" (click)="!nextSaveBtnLoding ? addUser() : ''"
                            class="btn btn-warning px-5">
                            <app-loader *ngIf="nextSaveBtnLoding" loaderSize="small" loaderColor="light"></app-loader>
                            <span *ngIf="!nextSaveBtnLoding">Create</span>
                        </button>
                        <button *ngIf="isEdit" type="button" (click)="!nextSaveBtnLoding ? editUser() : ''"
                            class="btn btn-warning px-5">
                            <app-loader *ngIf="nextSaveBtnLoding" loaderSize="small" loaderColor="light"></app-loader>
                            <span *ngIf="!nextSaveBtnLoding">Update</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</div>
